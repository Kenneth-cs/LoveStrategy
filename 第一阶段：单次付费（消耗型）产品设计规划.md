# 第一阶段：单次付费（消耗型）产品设计规划

> **版本**: V1.0 完善版  
> **更新时间**: 2024年12月  
> **目标**: 设计一套"让用户觉得便宜，但实际上消费很快"的经济模型

---

## 📋 文档导航

1. [核心概念包装](#1-核心概念包装-branding)
2. [定价策略](#2-定价策略-pricing--充值档位)
3. [消费菜单](#3-消费菜单-spending-menu---简化版-)
4. [交互流程](#4-功能设计与交互流程-user-flow---优化版-)
5. [技术实现](#技术实现路线图-technical-action-plan-)
6. [设计亮点](#五设计亮点与优化建议-)
7. [行动计划](#六下一步行动-)

---

## 一、产品设计核心原则 🎯

### 设计哲学
既然确定走"金币"模式，我们需要设计一套**"让用户觉得便宜，但实际上消费很快"**的经济模型。

### 关键目标
- ✅ **初期体验好**：66签足够体验所有核心功能
- ✅ **价格阶梯简单**：3档定价（3/8/18），用户不用算账
- ✅ **自然付费点**：大功能"刚好差一点"，促成首单
- ✅ **高频消费钩子**：回复助手3签，培养使用习惯

---

## 🎯 快速参考表

### 功能定价一览

| 功能 | 定价 | 单价约值 | 使用场景 | 策略定位 |
|:---|:---:|:---:|:---|:---|
| **高情商回复助手** | 3签 | ¥0.3 | 不知道怎么回、避免聊天尴尬 | 🔥 高频钩子 |
| **鉴渣雷达（单图）** | 8签 | ¥0.8 | 快速鉴定聊天对象 | ⚡️ 主力功能 |
| **截图起卦** | 8签 | ¥0.8 | 测桃花运、感情走向 | 🔮 玄学溢价 |
| **多图深度分析** | 18签 | ¥1.8 | 结合上下文全局分析 | 💎 高客单价 |

### 充值套餐一览

| 档位 | 价格 | 获得签数 | 单价 | 赠送 | 推荐度 |
|:---|:---:|:---:|:---:|:---:|:---:|
| 尝鲜包 | ¥5.8 | 60签 | ¥0.097/签 | - | ⭐️⭐️⭐️ |
| 超值包 | ¥17.8 | 200签 | ¥0.089/签 | +20签 | ⭐️⭐️⭐️⭐️⭐️ 推荐 |
| 尊享包 | ¥67.8 | 800签 | ¥0.085/签 | +120签 | ⭐️⭐️⭐️⭐️ |

### 新用户体验预算（66签）

| 行为 | 消耗 | 剩余 | 用户心理 |
|:---|:---:|:---:|:---|
| 下载App | - | 66签 | "居然送这么多！" |
| 高情商回复 ×5 | -15签 | 51签 | "这个好用，已经习惯了" |
| 鉴渣雷达 ×3 | -24签 | 27签 | "分析挺准，值得信赖" |
| 截图起卦 ×2 | -16签 | 11签 | "玄学也有点意思" |
| 想用多图分析 | 需18签 | **差7签** | 💰 "6块钱能买60签，充一个吧" |

---

#### 1. 核心概念包装 (Branding)

不要直接叫“金币”，太土了。结合你的“恋爱军师”主题，建议包装成：
*   **名称：** **“桃花签”** 象征姻缘、运气。用户使用它不仅是买服务，更像是在为自己的恋情祈福。
*   **UI 表现：** 一枚古风的木质签牌，上面隐约刻着桃花纹路。
  **动效设计：**消耗时： 签牌燃烧或化作粉色花瓣飘向屏幕中央，揭示答案。

#### 2. 定价策略 (Pricing) & 充值档位

利用**锚定效应**。我们的目标是引导用户购买中间档位。

| 档位名称 | 价格 (CNY) | 获得代币 (桃花签) | 单价分析 | 心理暗示 |
| :--- | :--- | :--- | :--- | :--- |
| **尝鲜包** | **¥ 6.00** | **60 签** | ¥0.1 / 签 | “只要一瓶奶茶钱，救急！” |
| **超值包** (推荐) | **¥ 18.00** | **200 签** | ¥0.09 / 签 | **+赠送 20 签** (最划算) |
| **尊享包** | **¥ 68.00** | **800 签** | ¥0.085 / 签 | **+赠送 120 签** (土豪专用) |

#### 3. 消费菜单 (Spending Menu) - 简化版 ✅

**设计原则：价格阶梯越少越好，用户不爱算账。**

**如何免费？** 新用户首次下载送 **66 签**"桃花签"（寓意"六六大顺"）。

##### 📊 三档定价体系

| 功能名称 | 定价 | 用户体验次数（基于66签） | 设计理由 |
|:---|:---|:---|:---|
| **🔹 小签 (3签/次)** | 3签 | 22次 | 🔥 **高频钩子** |
| 高情商回复助手 | 3签 | | 最高频使用场景，培养用户习惯 |
| | | | |
| **🔸 中签 (8签/次)** | 8签 | 8次 | ⚡️ **标准服务** |
| 鉴渣雷达（单图） | 8签 | | 数字吉利，主力功能 |
| 截图起卦 | 8签 | | 玄学溢价，情绪价值 |
| | | | |
| **🔶 大签 (18签/次)** | 18签 | 3次 | 💎 **高客单价** |
| 多图深度分析（最多5张） | 18签 | | 结合上下文，高价值服务 |
| 深度人设分析（V2.0） | 18签 | | 加入星座/MBTI等参数 |

---

##### 💡 新用户体验路径设计（基于66签初始额度）

```
用户下载 App → 赠送 66 签 🌸

【体验阶段】
  ↓
试用小签：高情商回复 (3签 × 5次 = 15签) → 剩余 51签
  ↓ "这个好用！"
  
试用中签：鉴渣雷达 (8签 × 3次 = 24签) → 剩余 27签
  ↓ "准确度还行！"
  
试用中签：截图起卦 (8签 × 2次 = 16签) → 剩余 11签
  ↓ "有点意思！"
  
试用大签：多图分析 (18签 × 0次 = 差7签) → 💥 付费点
  ↓
弹窗："军师正在为你深度解析... 深度算力不足，仅需 ¥5.8 解锁！"
```

**设计亮点**：
- ✅ 用户可以充分体验所有**中低频功能**
- ✅ 培养使用习惯（高情商回复用5次足够形成依赖）
- ✅ 最后"差一点点"用不了大签 → **天然付费点**
- ✅ "66签"比"20签"听起来更大方，用户心理账户更舒服

---

##### 🎯 功能详解

**1️⃣ 小签：高情商回复助手 (3签/次)**
- **内容**：生成3种风格回复（高冷/温柔/绿茶）
- **场景**："不知道怎么回"、"不想把天聊死"
- **策略**：定价最低，作为**入门钩子**，培养用户"遇事问军师"的习惯
- **关联销售**：在"鉴渣雷达"分析完后，弹窗推荐："军师已看穿对方套路！不知道怎么怼回去？试试回复助手，仅需3签。"

**2️⃣ 中签：鉴渣雷达 (8签/次)**
- **内容**：单图聊天记录分析，7维度评分 + PUA检测
- **场景**：日常聊天快速鉴定
- **策略**：数字"8"吉利，且与"5签"拉开差距，避免用户纠结
- **UI限制**：仅支持1张图上传

**3️⃣ 中签：截图起卦 (8签/次)**
- **内容**：图像意象 + 卦象解读，玄学情绪价值
- **场景**：聊天背景、风景照、任意图片
- **策略**：与"鉴渣雷达"同价，强化"8签=标准服务"的认知
- **传播点**：小红书爆款潜质 —— "连风景照都能测桃花运"

**4️⃣ 大签：多图深度分析 (18签/次)**
- **内容**：上传2-5张图，结合上下文深度分析
- **场景**：重要对话、长对话、需要全局判断
- **策略**：高客单价，制造"刚好不够用"的稀缺感
- **UI限制**：强制限制最多5张图（避免定价复杂化）
- **V1.0实现方式**：UI层面禁用超过5张图的选择

---

##### 🚫 第二阶段功能（V2.0暂不开发）

- 深度人设分析（加入星座/MBTI/年龄参数）
- 情感档案调用（结合历史记忆分析）
- 档案功能策略：建立免费，调用收费（锁定用户）



#### 4. 功能设计与交互流程 (User Flow) - 优化版 ✅

为了最大化变现效率，我们需要设计**"上瘾模型"**：

##### 🎣 第一阶段：初始诱饵 (The Hook)

**赠送策略**：新用户下载安装，**默认赠送 66 签"桃花签"** 🌸

**为什么是66而不是20？**
- ✅ **充分体验**：让用户真正用爽（小签5次+中签5次+还剩余额）
- ✅ **数字吉利**："六六大顺"，中国用户认知好
- ✅ **心理账户**：66听起来"很大方"，用户更愿意尝试付费回馈
- ✅ **自然卡点**：大签需要18签，66签用完中小签后，刚好"差一点"

**体验路径**：
```
下载 → 66签
  ↓
高频使用"回复助手"（3签×N次）→ 养成习惯
  ↓
尝试"鉴渣雷达"（8签×N次）→ 认可功能
  ↓
好奇"截图起卦"（8签×N次）→ 产生依赖
  ↓
想用"多图深度分析"（18签）→ 💥 余额不足 → 付费
```

---

##### 💰 第二阶段：关键卡点 (The Paywall)

**触发场景**：
1. 用户选择"多图分析"（18签），但余额 < 18签
2. 用户在任意功能余额不足时

**UI 弹窗设计**：❌ 不要写"余额不足"

**优化文案**：
```
🌸 桃花签不足啦！

军师正在为你深度解析对方的微表情和潜台词...
深度算力需要更多桃花签支持。

[查看充值] [暂时不用]

💡 仅需 ¥5.8 即可获得 60 签，相当于一杯奶茶钱~
```

**弹窗时机**：
- ⏰ **点击按钮前**检查余额（避免加载后才告知不足）
- 🎯 在每个功能按钮上显示"消耗X签"提示

---

##### 🔄 第三阶段：关联销售 (Cross-sell)

**场景1：鉴渣雷达 → 回复助手**
```
分析结果显示：🚩 PUA倾向 75%

[生成高情商回复] (仅需3签)
💬 军师已看穿对方套路！不知道怎么怼回去？
```

**场景2：回复助手 → 截图起卦**
```
已生成3条回复话术

[测一测对方会怎么回应] (仅需8签)
🔮 想知道发出去对方会是什么反应吗？
```

**场景3：充值后推荐**
```
充值成功！🎉 当前余额：126签

💡 体验建议：
- 先用"多图分析"看全局（18签）
- 再用"回复助手"拿捏对方（3签）
```


---

## 技术实现路线图 (Technical Action Plan) ✅

### 📋 核心技术调整

#### 1️⃣ 数据存储方案：从 UserDefaults 升级到 iCloud

**❌ 不推荐：UserDefaults**
```swift
// 问题：卸载App会丢失数据，用户体验差
UserDefaults.standard.set(balance, forKey: "coins")
```

**✅ 推荐：NSUbiquitousKeyValueStore (iCloud Key-Value Store)**
```swift
// 优势：Apple ID 绑定，卸载重装数据不丢失
// 代码复杂度：与 UserDefaults 完全相同！
NSUbiquitousKeyValueStore.default.set(balance, forKey: "peachBlossomCoins")
NSUbiquitousKeyValueStore.default.synchronize()
```

**实现要点**：
- ✅ 无需登录系统，自动与 Apple ID 绑定
- ✅ 5MB 免费额度，存储金币绰绰有余
- ✅ 多设备自动同步（iPad/iPhone）
- ⚠️ 需在 Xcode 中开启 iCloud Capability

**用户提示文案**（充值页面底部小字）：
```
💡 您的桃花签已通过 iCloud 自动备份
   卸载重装后会自动恢复（需使用同一 Apple ID）
```

---

#### 2️⃣ 扣费逻辑：先验证 API 成功，再扣款

**❌ 错误做法**：
```swift
deductCoins(8) // 先扣钱
let result = try await api.analyze() // API 失败了，钱白扣
```

**✅ 正确做法**：
```swift
// Step 1: 检查余额
guard checkBalance(required: 8) else {
    showRechargeAlert()
    return
}

// Step 2: 调用 API
do {
    let result = try await volcengineService.analyzeImages()
    
    // Step 3: 成功后才扣费
    deductCoins(8)
    
} catch {
    // API 失败不扣钱
    showErrorAlert("军师正在忙碌，请点击重试~（未扣费）")
}
```

---

### 🛠️ 开发任务清单（优先级排序）

#### ✅ Phase 1: 桃花签管理器（核心，1-2天）

**文件**：`PeachBlossomManager.swift`

**功能清单**：
- [x] 初始化赠送66签
- [x] iCloud 自动同步
- [x] 检查余额 `checkBalance(required: Int) -> Bool`
- [x] 扣费逻辑 `deductCoins(_ amount: Int)`
- [x] 充值逻辑 `addCoins(_ amount: Int, source: String)`
- [x] 余额查询 `getBalance() -> Int`
- [x] 消费记录（可选）

**技术要点**：
```swift
// 使用 @Published 实现响应式更新
class PeachBlossomManager: ObservableObject {
    @Published var balance: Int = 0
    
    private let iCloud = NSUbiquitousKeyValueStore.default
    
    init() {
        loadBalance()
        setupCloudSync()
    }
}
```

---

#### ✅ Phase 2: 改造现有功能（扣费集成，1天）

**涉及文件**：
- `VolcengineService.swift` - 在API调用前后加入扣费逻辑
- `ContentView.swift` - 鉴渣雷达按钮显示"消耗8签"
- `ReplyAssistantView.swift` - 回复助手按钮显示"消耗3签"
- `MetaphysicsView.swift` - 截图起卦按钮显示"消耗8签"

**UI改造示例**：
```swift
Button {
    // 检查余额
    if manager.checkBalance(required: 8) {
        isAnalyzing = true
    } else {
        showRechargeSheet = true
    }
} label: {
    VStack(spacing: 4) {
        Text("开始深度分析")
        Text("消耗 8 签").font(.caption2)
    }
}
```

---

#### ✅ Phase 3: 充值中心 UI（StoreKit 集成，2-3天）

**新建文件**：
- `IAPManager.swift` - StoreKit 2 内购管理
- `RechargeView.swift` - 充值弹窗/页面

**充值档位**（需在 App Store Connect 配置）：
| Product ID | 价格 | 金币 |
|:---|:---|:---|
| `com.lovestrategy.coins.tier1` | ¥5.8 | 60签 |
| `com.lovestrategy.coins.tier2` | ¥17.8 | 200签 |
| `com.lovestrategy.coins.tier3` | ¥67.8 | 800签 |

**StoreKit 2 示例代码**：
```swift
import StoreKit

@MainActor
class IAPManager: ObservableObject {
    @Published var products: [Product] = []
    
    func loadProducts() async {
        let productIDs = [
            "com.lovestrategy.coins.tier1",
            "com.lovestrategy.coins.tier2",
            "com.lovestrategy.coins.tier3"
        ]
        products = try await Product.products(for: productIDs)
    }
    
    func purchase(_ product: Product) async throws {
        let result = try await product.purchase()
        // 处理购买结果
    }
}
```

---

#### ✅ Phase 4: UI 细节优化（1天）

**功能点**：
- 主页右上角显示余额："🌸 126"
- 余额不足弹窗（优化文案）
- 桃花签燃烧动效（可选）
- 摇签筒音效（可选）

---

### 🚀 建议开发顺序

```
Week 1: Phase 1 (PeachBlossomManager) 
  ↓
Week 1-2: Phase 2 (改造现有功能)
  ↓
Week 2: Phase 3 (充值中心，暂用模拟数据)
  ↓
Week 3: App Store Connect 配置内购
  ↓
Week 3: Phase 3 (接入真实 StoreKit)
  ↓
Week 4: Phase 4 (UI 优化 + 测试)
```

**里程碑1**（Week 1）：桃花签体系跑通，暂不接真实支付  
**里程碑2**（Week 2）：充值UI完成，模拟充值可用  
**里程碑3**（Week 3）：真实内购打通，沙盒测试通过  
**里程碑4**（Week 4）：上线 App Store

---

## 五、设计亮点与优化建议 🌟

### ✅ 亮点1："桃花签"品牌包装

**点评**：极好。这解决了"花钱心疼"的问题。

**心理学原理**：
- 花钱 = 痛苦（失去感）
- 求签 = 期待（获得感）

**强化建议**：
```
🎵 音效设计
- 点击分析时：播放"摇签筒"沙沙声（1-2秒）
- 结果出现时："叮"的一声，签牌掉落
- 成功分析后：轻柔的古风背景音（可选）

💫 动效设计
- 消耗时：签牌燃烧，化作粉色花瓣飘向屏幕中央
- 充值时：花瓣从四周飞入，汇聚成签牌
- 余额显示：数字跳动动画
```

**实现优先级**：
- P0（必须）：摇签音效 + 签牌图标
- P1（建议）：花瓣动效
- P2（可选）：背景音乐

---

### ✅ 亮点2：定价心理学 (The Remainder Trick)

**设计策略**：66签 + 3/8/18签阶梯

**用户旅程**：
```
下载App (66签)
  ↓
高情商回复 × 5次 (3×5=15签) → 剩51签 ✅ 养成习惯
  ↓
鉴渣雷达 × 3次 (8×3=24签) → 剩27签 ✅ 认可功能
  ↓
截图起卦 × 2次 (8×2=16签) → 剩11签 ✅ 产生依赖
  ↓
多图分析 × 0次 (18签) → 差7签 💰 付费点
```

**心理触发点**：
- ✅ "已经用了这么多次，确实好用"（沉没成本）
- ✅ "就差一点点就能用大功能"（完成欲）
- ✅ "6块钱能买60签，太划算了"（锚定效应）

---

### ✅ 亮点3：截图起卦的传播潜力

**小红书爆款公式**：
```
标题：【震惊】连风景照都能测出我的桃花运！
内容：随手拍的照片 → AI解读 → 玄学结果
标签：#恋爱军师 #AI算命 #桃花运 #聊天分析

预期传播路径：
小红书种草 → App Store下载 → 免费体验 → 付费转化
```

**产品卖点**：
- 🔮 "截图即卦象，图片藏玄机"
- 💕 "不仅分析聊天，连照片都能测姻缘"
- 🎯 "每天一卦，洞察感情走向"

---

### ⚠️ 风险点与应对

**风险1：多图功能实现复杂**
- 方案：V1.0 强制UI限制5张图，超出禁用
- 代码：`PhotosPicker(selection: $selections, maxSelectionCount: 5)`

**风险2：用户嫌66签太少**
- 数据监控：统计平均耗尽时间
- 灵活调整：如果48小时内耗尽率>80%，考虑调整为88签

**风险3：iCloud同步延迟**
- 提示文案："同步中，请稍候..."
- 本地优先：优先使用本地缓存，后台同步

---

## 六、下一步行动 🚀

### 🎯 当前状态：v1.1.0 已提交 App Store

### 📅 建议开发计划（付费功能）

**Week 1 (Day 1-2)：桃花签管理器**
```
[ ] 创建 PeachBlossomManager.swift
[ ] 实现 iCloud 同步
[ ] 初始化赠送66签逻辑
[ ] 扣费/充值/查询接口
```

**Week 1 (Day 3-5)：功能改造**
```
[ ] VolcengineService 加入扣费逻辑
[ ] 三大功能按钮加"消耗X签"提示
[ ] 余额不足弹窗
[ ] 主页右上角显示余额
```

**Week 2 (Day 1-3)：充值中心**
```
[ ] RechargeView.swift UI
[ ] IAPManager.swift (暂用模拟数据)
[ ] 3档价格展示
[ ] 模拟充值流程
```

**Week 2 (Day 4-5)：App Store Connect 配置**
```
[ ] 创建3个内购产品ID
[ ] 配置价格和描述
[ ] 上传截图
```

**Week 3：StoreKit 2 集成**
```
[ ] 接入真实支付
[ ] 沙盒测试
[ ] 购买流程完整测试
```

**Week 4：优化与上线**
```
[ ] 音效/动效
[ ] UI细节打磨
[ ] 提交审核（v1.2.0 付费版）
```

---

## 🎬 立即开始

**建议优先级**：🥇 **Phase 1: PeachBlossomManager**

**原因**：
- ✅ 最基础，后续所有功能依赖它
- ✅ 可以先不接支付，跑通逻辑
- ✅ iCloud存储方案一步到位

**准备好了吗？**

我可以立即为你生成 `PeachBlossomManager.swift` 的完整代码，包括：
- ✅ iCloud 自动同步
- ✅ 新用户赠送66签
- ✅ 扣费/充值/查询接口
- ✅ 消费记录（可选）
- ✅ SwiftUI @Published 响应式更新

**回复"开始"，我们立刻进入 Phase 1 开发！** 🚀