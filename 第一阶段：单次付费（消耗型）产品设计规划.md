
### 第一阶段：单次付费（消耗型）产品设计规划

既然确定走“金币”模式，我们需要设计一套**“让用户觉得便宜，但实际上消费很快”**的经济模型。

#### 1. 核心概念包装 (Branding)

不要直接叫“金币”，太土了。结合你的“恋爱军师”主题，建议包装成：
*   **名称：** **“桃花签”** 象征姻缘、运气。用户使用它不仅是买服务，更像是在为自己的恋情祈福。
*   **UI 表现：** 一枚古风的木质签牌，上面隐约刻着桃花纹路。
  **动效设计：**消耗时： 签牌燃烧或化作粉色花瓣飘向屏幕中央，揭示答案。

#### 2. 定价策略 (Pricing) & 充值档位

利用**锚定效应**。我们的目标是引导用户购买中间档位。

| 档位名称 | 价格 (CNY) | 获得代币 (桃花签) | 单价分析 | 心理暗示 |
| :--- | :--- | :--- | :--- | :--- |
| **尝鲜包** | **¥ 6.00** | **60 签** | ¥0.1 / 签 | “只要一瓶可乐钱，救急！” |
| **超值包** (推荐) | **¥ 18.00** | **200 签** | ¥0.09 / 签 | **+赠送 20 签** (最划算) |
| **尊享包** | **¥ 68.00** | **800 签** | ¥0.085 / 签 | **+赠送 120 签** (土豪专用) |

#### 3. 消费菜单 (Spending Menu) - 你的卖点

将 AI 的能力拆解为不同价位的“服务”，利用**价格歧视**满足不同需求的用户。

如何免费？ 新用户首次下载送 20 签（够测 4 次）。

*   **基基础消耗（门槛级）：渣渣雷达 (Quick Scan)**
*  单图分析
    *   **价格：** **5 签/次** 
    * 逻辑： 相当于你原来的“免费版”。

*   多图连贯分析 (支持5张图以内)
    *   定价： 15 签/次
    *   卖点： “结合上下文，不再断章取义”。
    *   逻辑： 这里需要消耗更多的 Token 处理长文本，收费合理。

* 深度人设分析 (Deep Dive)（第二阶段做）
* 定价： +10 金币（作为附加选项）
* 触发条件： 用户可选择“添加对方星座、MBTI、性别、年龄”等参数。
* 卖点： “加入玄学和心理学维度，精准度提升 200%”。


*   **刚需服务：高情商回复 (Reply Assistant)**
    *   **价格：** **3签/次** 
    *   **内容：** 针对对方的话，生成 3 条不同风格的回复（高冷/绿茶/温柔）。
    *   **场景：** “不知道怎么回”、“不想把天聊死”。这是最高频的消耗点。


*   **溢价服务：情感档案建立 (Emotional Profile)**（第二阶段做）
    *  策略：建立档案免费，但“调用档案”收费。
 *  * 原因： 如果建立档案要收费，没人会建。你要鼓励用户建档案，这样他就被锁定了。
 * 收费点： 当用户在聊天分析时，勾选“结合历史档案分析”（这就涉及到了长期记忆读取），这需要额外消耗金币。
 * 定价： +5 金币/次（作为附加选项）。



#### 4. 功能设计与交互流程 (User Flow)

为了最大化变现效率，我们需要设计**“上瘾模型”**：

1.  **初始诱饵 (The Hook)：**
    *   新用户下载安装，**默认赠送 20 签“桃花签”**。
    *   **目的：** 刚好够他做X次“深度报告” (X令) 差一点点，或者够做 X 次深度分析。让他先体验到爽感。

2.  **关键卡点 (The Paywall)：**
    *   当用户上传了长截图，或者选择了“深度报告”时，如果余额不足。
    *   **UI 弹窗：** 不要冷冰冰地写“余额不足”。
    *   **文案：** “军师正在为你通过微表情和潜台词分析他的真实意图... 深度算力不足，仅需 ¥6 即可解锁本次关键情报。”

3.  **结果截断 (The Teaser)：**
    *   如果是免费或余额不足，先展示分析结果的 **前 20%**（比如只显示：“经过分析，该目标渣男指数高达 85%...”），剩下的内容打高斯模糊，中间放一个“解锁”按钮。

---

### 技术实现路线图 (Action Plan)

既然你决定了做这个，我们需要在代码层面做以下准备。你现在的 `UsageLimitManager.swift` 需要大改。

我为你整理了一个开发 To-Do List：

**1. 引入 StoreKit 2 (iOS 原生内购框架)**
   *   这是目前最简单、安全的内购实现方式。
   *   *文件需求:* 新建 `IAPManager.swift`。

**2. 重构用户资产管理**
   *   需要一个本地（最好同步 iCloud）的数据库来存用户的余额。
   *   *文件需求:* 更新 `UsageLimitManager.swift` 或新建 `UserCoinsManager.swift`。

**3. 设计“充值中心”视图**
   *   一个简单的弹窗或页面，展示上面提到的 3 个价格档位。
   *   *文件需求:* `StoreView.swift`。

**4. 改造现有的功能入口**
   *   在 `ReplyAssistantView` 和 `RadarChartView` 的按钮上，加上“消耗 5 令”的小字。

---

**你想先从哪里开始？**
建议先快速创建一个 **`CoinManager` (代币管理器)**，先把“赠送初始金币”和“扣费”的逻辑写好，暂时不接真实的苹果支付（用模拟数据），这样我们可以先跑通整个 App 的“付费体验流程”。如果你同意，我可以帮你写这个 Manager。