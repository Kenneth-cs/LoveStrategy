# 📱 提交 v1.1.0 到 App Store - 完整流程

## 🎯 版本信息

**当前版本**: 1.0.0 (Build 1) - 已上线  
**新版本**: 1.1.0 (Build 2) - 准备提交  
**更新类型**: 功能优化 + Bug修复

---

## 📋 Step 1: 修改 Xcode 项目版本号

### 方式一：在 Xcode 中修改（推荐）

1. 打开 `恋爱军师.xcodeproj`
2. 选择项目根节点（蓝色图标）
3. 选择 Target "Zhananfenxi"
4. 在 "General" 标签页中找到 "Identity" 部分
5. 修改版本号：
   - **Version**: `1.1.0`（用户看到的版本）
   - **Build**: `2`（Build号）

### 方式二：直接修改配置文件

打开 `Info.plist` 或在终端运行：

```bash
# 修改 Version
/usr/libexec/PlistBuddy -c "Set :CFBundleShortVersionString 1.1.0" Zhananfenxi/Info.plist

# 修改 Build
/usr/libexec/PlistBuddy -c "Set :CFBundleVersion 2" Zhananfenxi/Info.plist
```

---

## 📦 Step 2: Archive 构建

### 1. 清理项目
```bash
# 在 Xcode 中: Product -> Clean Build Folder
# 或按快捷键: Shift + Command + K
```

### 2. 选择目标设备
- 顶部选择：**Any iOS Device (arm64)**

### 3. Archive
- 菜单：**Product → Archive**
- 或快捷键：**Command + Option + Shift + K**
- 等待构建完成（3-5分钟）

### 4. Organizer 窗口
- Archive 成功后会自动打开 Organizer
- 可以看到 "恋爱军师 1.1.0 (2)" 的构建记录

---

## 🚀 Step 3: 上传到 App Store Connect

### 在 Organizer 中：

1. 选择刚才的 Archive
2. 点击 **Distribute App** 按钮
3. 选择 **App Store Connect**
4. 选择 **Upload**
5. 配置选项：
   - ✅ Upload your app's symbols（上传符号文件）
   - ✅ Manage Version and Build Number（自动管理版本）
6. 自动签名：选择你的开发者账号
7. 点击 **Upload**
8. 等待上传完成（5-10分钟）

**上传成功提示：**
> "恋爱军师.ipa has been uploaded to App Store Connect"

---

## 📝 Step 4: 在 App Store Connect 填写更新信息

### 1. 登录 App Store Connect

访问：https://appstoreconnect.apple.com

### 2. 进入你的 App

- 我的 App → 恋爱军师

### 3. 创建新版本

- 点击左侧 **"+ 版本或平台"**
- 选择 **"iOS"**
- 输入版本号：**1.1.0**
- 点击 **"创建"**

### 4. 选择构建版本

- 在 "构建版本" 部分
- 等待构建版本出现（可能需要5-15分钟）
- 点击 **"+ 添加构建版本"**
- 选择 **1.1.0 (2)**

### 5. 填写"此版本的新增内容"

复制以下内容：

```
✨ 全新优化，体验升级！

【iPad 适配】
- 优化 iPad 界面，内容全屏展示更舒适

【交互优化】
- 点击按钮自动收起键盘，视野更清爽
- 所有功能增加加载时间提示，不再焦虑等待

【品牌升级】
- 统一"军师"品牌形象，更有温度的恋爱顾问

【功能优化】
- "截图起卦"功能文案更直白易懂
- 修复拿捏助手的显示问题
- 优化错误提示，更友好的交互体验

感谢你的支持，军师会持续进化！💕
```

### 6. 其他信息检查

- **关键词**: 无需修改（除非要优化）
- **描述**: 无需修改
- **截图**: 无需修改（界面变化不大）
- **预览视频**: 无需修改
- **隐私政策**: 无需修改
- **审核信息**: 无需修改

### 7. 审核备注（可选）

如需添加审核备注，可以写：

```
此次更新主要包含：
1. iPad 界面适配优化
2. 键盘交互优化
3. 文案统一调整
4. Bug 修复

无功能性重大变更，无新增第三方SDK，无新增数据收集。
测试账号和说明同 1.0 版本。
```

---

## ✅ Step 5: 提交审核

### 1. 检查清单

确认以下内容已完成：
- [x] 版本号：1.1.0
- [x] Build号：2
- [x] 构建版本已选择
- [x] 更新说明已填写
- [x] 所有必填项已完成

### 2. 提交

- 点击右上角 **"存储"**
- 点击 **"提交以供审核"**
- 再次确认信息
- 点击 **"提交"**

### 3. 状态变化

- **等待审核** (Waiting for Review) - 通常 1-3 天
- **正在审核** (In Review) - 通常 1-24 小时
- **可供销售** (Ready for Sale) - 审核通过 ✅
- 或 **被拒绝** (Rejected) - 需修改后重新提交

---

## 📧 审核期间

### 预计时间
- **总时长**: 1-5 天
- **快的话**: 1-2 天通过
- **慢的话**: 3-5 天

### 你会收到邮件通知：
1. "准备提交" - 构建版本准备好
2. "等待审核" - 已进入队列
3. "正在审核" - 审核中
4. "已批准" - 审核通过 🎉
5. "可供销售" - 已上架

---

## 🎉 审核通过后

### 自动发布（如果选择了自动发布）
- 审核通过后自动上架
- 用户可以在 App Store 更新

### 手动发布（如果选择了手动发布）
- 审核通过后不会自动上架
- 你需要在 App Store Connect 点击 **"发布此版本"**

---

## ❌ 如果被拒绝

### 常见拒绝原因：

1. **界面问题**
   - 截图与实际不符
   - 崩溃或卡顿

2. **内容问题**
   - "起卦"、"算命" 等可能被认为是迷信
   - 需要强调"心理投射"、"娱乐"性质

3. **隐私问题**
   - 数据收集说明不清
   - 需要更新隐私政策

### 处理流程：

1. 查看拒绝原因（邮件 + App Store Connect）
2. 修复问题
3. 回复审核团队说明
4. 或重新提交新的 Build

---

## 📊 发布后监控

### 1. 观察更新率
- App Store Connect → 分析 → 更新
- 查看用户更新情况

### 2. 关注崩溃率
- Xcode → Organizer → Crashes
- 查看是否有新的崩溃

### 3. 用户反馈
- App Store 评论
- App 内反馈

### 4. 关键指标
- 日活用户 (DAU)
- 留存率 (D1, D7, D30)
- 使用次数（每天的分析、回复、起卦次数）

---

## 🔧 快捷命令（Terminal）

```bash
# 1. 进入项目目录
cd /Users/zhangshaocong6/Desktop/cs/AI/Zhananfenxi

# 2. 查看当前版本
/usr/libexec/PlistBuddy -c "Print :CFBundleShortVersionString" Zhananfenxi/Info.plist
/usr/libexec/PlistBuddy -c "Print :CFBundleVersion" Zhananfenxi/Info.plist

# 3. 打开 Xcode
open 恋爱军师.xcodeproj

# 4. 清理构建
xcodebuild clean -project 恋爱军师.xcodeproj -scheme Zhananfenxi
```

---

## 📞 需要帮助？

### Apple 支持
- App Store Connect 帮助：https://help.apple.com/app-store-connect/
- 开发者论坛：https://developer.apple.com/forums/

### 常见问题
1. **构建上传失败**: 检查证书和描述文件
2. **审核时间过长**: 正常现象，耐心等待
3. **被拒绝**: 查看邮件详细说明

---

## ✅ 完成！

提交完成后，你可以：
1. ☕ 喝杯咖啡，放松一下
2. 📊 准备监控数据
3. 💡 规划下一个版本功能
4. 📣 准备更新后的营销推广

祝审核顺利！🎉

